# Les élévations de privilèges
L'élévation de privilèges (privileges escalation) consiste à exploiter un bogue, un défaut de conception ou une supervision de la configuration dans un système d'exploitation ou une application logicielle pour obtenir un accès privilégié à des ressources normalement protégées d'une application ou d'un utilisateur. Le résultat est qu’une application avec plus de privilèges que prévu par le développeur d’application ou l’administrateur système peut effectuer des actions non autorisées.

## Le fichier /etc/passwd
Lorsque vous avez des informations d'identification ou un autre type d'accès au système de fichiers, il peut être très intéressant de récupérer le fichier /etc/passwd. Avec ce fichier en main, vous pouvez simplement énumérer les noms d’utilisateurs de ce système particulier. Étant donné que les utilisateurs ne sont pas habitués à créer ou à utiliser des mots de passe forts (surtout lorsqu'il n'y a aucune application de politique de sécurité), cela peut donner lieu à des attaques par dictionnaire et étendre peu à peu les droits de l'attaquant sur le système.

## Mauvais contrôle sur les permissions des applications
Les applications présentes sur un poste ne sont pas toujours utiles à l'ensemble des utilisateurs. Cependant, il arrive parfois que l'administrateur n'ait pas jugé utile de sécuriser cet aspect et que certains applicatifs puissent rendre le système vulnérable. Il existe plusieurs types de vulnérabilités à exploiter, certaines plus complexes que d'autres, en voici une plutôt simple à exploiter et pourtant, toujours répandue. 

### SUID
Les applications au sein d'un système vont parfois permettre une élévation de privilèges inattendue. SUID pour "set user ID upon execution" est activé par défaut dans toutes les distributions Linux. Si un fichier avec ce bit est exécuté, l'ID de l'utilisateur peut être modifié lors de l'exécution de programme. Le principe va être de détecter les binaires pour lesquels vous avez un droit d'utilisation et dont le propriétaire est un utilisateur avec plus de droits. Si le propriétaire du fichier est root, il sera remplacé par root même s'il a été exécuté à partir de l'utilisateur bob. SUID est représenté par un "s" lors d'un listing de fichiers. Cette vulnérabilité s'évalue rapidement avec la commande suivante :

```
find / -perm -4000 -type f -exec ls -la {} 2>/dev/null \;
```

## Mauvais contrôle sur les permissions des routines d'automatisation
Les routines d'automation permettent une administration automatisée définie dans le temps. Elle se réalise au travers de divers scripts et de systèmes de gestions de tâches planifiées (ex : cron / crontab). Ces routines sont généralement lancées avec des droits très importants. Si les fichiers de scripts exécutés disposent d'un accès en écriture trop permissif, un utilisateur mal intentionné pourrait alors les modifier pour faire exécuter du code avec un niveau de privilèges supérieur au sien.

## Les délégations d'administration
Certains utilisateurs ont parfois des délégations d'administration (par exemple au travers de l'applicatif sudo sous linux). Cependant il arrive que l'administrateur ne limite pas suffisamment les délégations d'administration et que l'utilisateur puisse alors devenir super-utilisateur assez simplement juste en rentrant son mot de passe utilisateur une nouvelle fois. Il peut aussi être possible que certaines délégations permettent l'accès à un applicatif et ce sans mot de passe. Afin de le vérifier il suffira de réaliser la commande suivante :

```
sudo -l
```

Si c'est le cas, il suffira d'exploiter l'application en question de manière a effectuer le maximum d'actions avec un niveau de privilèges administrateur.

## Vulnérabilité du kernel
Une des plus efficaces mais aussi des plus dangereuses. Les vulnérabilités du kernel exploitent généralement des défauts dans la manière dont le système va gérer la lecture et l'écriture dans ses zones mémoires. Quand elle est disponible (en fonction de la version du noyau), cette exploitation peut alors permettre d'obtenir en un clin d'œil les droits les plus élevés. Effet de bord important, elle peut dans certain cas conduire au plantage complet du système et pas toujours dans les meilleures dispositions. En effet, si cette attaque ne fonctionne pas, il pourrait être possible que la machine ne soit plus accessible jusqu'a un redémarrage manuel par son administrateur. Vous l'aurez compris, cet exploitation est a réaliser en dernier ressort.

